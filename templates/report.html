{% extends "base.html" %}

{% block title %}–û—Ç—á–µ—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏{% endblock %}

{% block content %}
<div class="report-container">
    <div class="report-header">
        <h1 class="report-title">–û—Ç—á–µ—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏</h1>
        <p class="report-subtitle">–°–∫–ª–∞–¥ –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ ‚Äî –û–¥–µ–∂–¥–∞ (–í–∞—Ä–∏–∞–Ω—Ç 19)</p>
        <p class="report-date">–î–∞—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è: {{ date }}</p>
    </div>
    
    <div class="report-info-grid">
        <div class="report-info-card">
            <h3 class="info-label">–ü–æ—Å—Ç–∞–≤—â–∏–∫</h3>
            <p class="info-value">{{ supplier.name }}</p>
        </div>
        <div class="report-info-card">
            <h3 class="info-label">–ü—Ä–æ–¥—É–∫—Ü–∏—è</h3>
            <p class="info-value">{{ product.name }}</p>
        </div>
    </div>
    
    <div class="report-results">
        <div class="results-header">
            <h3 class="results-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Ä–æ–≥–æ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h3>
            <div class="verdict-badge {% if metrics.is_quality %}verdict-good{% else %}verdict-bad{% endif %}">
                {{ metrics.verdict }}
            </div>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-item">
                <div class="metric-label">–°–∏–≥–Ω–∞–ª –Ω–æ—Ä–º—ã (Ch)</div>
                <div class="metric-value">{{ metrics.Ch }}</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">–°–∏–≥–Ω–∞–ª –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (Co)</div>
                <div class="metric-value">{{ metrics.Co }}</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">–û—Ç–Ω–æ—à–µ–Ω–∏–µ Go</div>
                <div class="metric-value">{{ metrics.Go }}</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å P</div>
                <div class="metric-value">{{ metrics.P }}</div>
            </div>
        </div>
        
        <h4 class="chars-title">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ü–∏–∏</h4>
        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</th>
                        <th>–ï–¥. –∏–∑–º.</th>
                        <th>–ù–æ—Ä–º–∞ (min-max)</th>
                        <th>–†–µ–∞–ª—å–Ω–æ–µ</th>
                        <th>–ì—Ä–∞–¥–∞—Ü–∏–∏ (n)</th>
                        <th>log‚ÇÇ(n)</th>
                        <th>–í–µ—Å</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in characteristics %}
                    <tr {% if c.real < c.min or c.real > c.max %}class="deviation-row"{% endif %}>
                        <td><strong>{{ c.name }}</strong></td>
                        <td>{{ c.unit or '-' }}</td>
                        <td>{{ c.min }} ‚Äî {{ c.max }}</td>
                        <td class="real-value {% if c.real < c.min or c.real > c.max %}deviation-value{% endif %}">
                            {{ c.real }}
                        </td>
                        <td>{{ c.gradations }}</td>
                        <td>{{ c.log2 }}</td>
                        <td>{{ c.weight }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div class="report-footer">
            <p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞:</strong> —à–∞–≥ Œîx = {{ delta_x }}</p>
            <p class="rule-description">–ü–æ—Ä–æ–≥–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ: P ‚â§ 0.5 ‚Üí –ø—Ä–æ–¥—É–∫—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è</p>
        </div>
    </div>
    
    <div class="report-actions">
        <button onclick="window.print()" class="btn btn-primary">
            üñ®Ô∏è –ü–µ—á–∞—Ç—å –æ—Ç—á–µ—Ç–∞
        </button>
        <a href="/spzr" class="btn">
            ‚Üê –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
        </a>
    </div>
</div>
{% endblock %}